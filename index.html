<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="logo.png" type="image/png">
    <link rel="stylesheet" href="style.css">
    <title>Formulário de Cadastro - Zyone Cosméticos</title>
</head>

<body>

    <header>

        <h1 class="brand-name">Zyone Cosméticos</h1>

    </header>

    <main class="form-container">

        <form action="" id="formulario">

            <h2 class="form-title">Cadastro de Cliente</h2>

            <div class="form-group">

                <label>Nome Completo</label>
                <input type="text" name="nomeCompleto" placeholder="Digite seu nome completo" required>

            </div>

            <div class="form-group">

                <label>CPF</label>
                <input type="text" id="cpf" name="cpf" placeholder="Digite seu CPF" required>

            </div>

            <div class="form-group">

                <label>Telefone</label>
                <input type="tel" id="telefone" name="telefone" placeholder="(00) 00000-0000" required>

            </div>

            <div class="form-group">

                <label>E-mail</label>
                <input type="email" name="email" placeholder="seu@email.com" required>

            </div>

            <div class="form-group">

                <label>Data de Nascimento</label>
                <input type="text" name="dataNasc" maxlength="10" id="dataNasc" required>

            </div>


            <div class="form-group">

                <label>CEP</label>
                <input type="text" id="cep" name="cep" maxlength="9" placeholder="Digite o seu CEP" required>

            </div>

            <div class="form-group">

                <label>Endereço Completo</label>
                <input type="text" id="endereco" name="endereco" placeholder="Digite seu endereço completo" required>

            </div>

            <div class="form-group">

                <label>Complemento</label>
                <input type="text" id="complemento" name="complemento" placeholder="Apartamento 2" required>

            </div>

            <div class="form-group">

                <label>Crie um nome de usuário</label>
                <input type="text" name="usuario" placeholder="Digite seu nome de usuário" required>

            </div>

            <div class="form-group">

                <label>Crie uma senha</label>
                <input type="password" name="senha" placeholder="Digite sua senha" required>

            </div>

            <button type="submit" class="submit-btn">Finalizar</button>

        </form>

        <div id="enviarDados">
            <div class="success-check">
                <svg viewBox="0 0 24 24">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z" />
                </svg>
            </div>

            <span class="status">Concluído com sucesso</span>

            <h1>Deseja enviar seus dados?</h1>

            <p class="description">Seus dados foram processados com sucesso. Clique no botão abaixo para confirmar o
                envio.</p>

            <button id="btnDados">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M2 6v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2zm17 2l-6.5 3.33L5 8v2l6.5 3.33L19 10V8zm0 6l-6.5-3.33L5 14v2l6.5 3.33L19 16v-2z" />
                </svg>
                Enviar dados
                </a>
        </div>

    </main>

    <footer>
        <p>&copy;2025 Zyone Cosméticos. Todos os direitos reservados.</p>
    </footer>

    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <script>

        const formulario = document.getElementById('formulario')
        const enviarDados = document.getElementById('enviarDados')
        const btnDados = document.getElementById('btnDados')
        const cepInput = document.getElementById('cep');
        const enderecoInput = document.getElementById('endereco');

        // Inicializa EmailJS
        (function () {
            emailjs.init("iArOc2TEu0F9kovWp"); // Substitua pela sua Public Key
        })();

        document.getElementById('formulario').addEventListener('submit', function (e) {
            e.preventDefault();

            formulario.style.display = 'none'
            enviarDados.style.display = 'flex'

            btnDados.addEventListener('click', function () {
                emailjs.sendForm('service_3lmbyw8', 'template_9a2cw1b', formulario)
                    .then(function (response) {
                        console.log('Sucesso!', response.status, response.text);
                        alert('Cadastro enviado com sucesso!');
                    }, function (error) {
                        console.log('Falha ao enviar:', error);
                        alert('Erro ao enviar. Tente novamente.');
                    });

                formulario.reset();
            });

        })

        document.getElementById('telefone').addEventListener('input', function (e) {
            let value = e.target.value.replace(/\D/g, '')

            if (value.length > 0) {
                value = '(' + value

                if (value.length > 3) {
                    value = value.substring(0, 3) + ') ' + value.substring(3)
                }

                if (value.length > 10) {
                    value = value.substring(0, 10) + '-' + value.substring(10)
                }

                if (value.length > 15) {
                    value = value.substring(0, 15)
                }
            }

            e.target.value = value
        })

        document.getElementById('cpf').addEventListener('input', function (e) {
            let value = e.target.value.replace(/\D/g, '')

            value = value.substring(0, 11)

            if (value.length > 0) {

                if (value.length > 3) {
                    value = value.substring(0, 3) + '.' + value.substring(3)
                }
                if (value.length > 7) {
                    value = value.substring(0, 7) + '.' + value.substring(7)
                }
                if (value.length > 11) {
                    value = value.substring(0, 11) + '-' + value.substring(11)
                }
            }

            e.target.value = value
        })

        document.getElementById('dataNasc').addEventListener('input', function (e) {
            let value = e.target.value.replace(/\D/g, ''); // Remove tudo que não for número
            value = value.substring(0, 8); // Limita a 8 dígitos (DDMMAAAA)

            if (value.length > 0) {
                if (value.length > 2) {
                    value = value.substring(0, 2) + '/' + value.substring(2); // Adiciona primeira barra
                }
                if (value.length > 4) {
                    value = value.substring(0, 5) + '/' + value.substring(5); // Adiciona segunda barra
                }
            }

            e.target.value = value; // Atualiza o campo com a formatação
        });


        cepInput.addEventListener('input', function (e) {
            let value = e.target.value.replace(/\D/g, '')

            if (value.length > 5) {
                value = value.slice(0, 5) + '-' + value.slice(5, 8)
            }

            e.target.value = value.slice(0, 9)
        })

        cepInput.addEventListener('blur', function () {
            const cepLimpo = cepInput.value.replace(/\D/g, '')

            if (cepLimpo.length !== 8) {
                alert("CEP inválido. Digite os 8 dígitos.")
                return
            }

            fetch(`https://viacep.com.br/ws/${cepLimpo}/json/`)
                .then(response => response.json())
                .then(data => {
                    if (data.erro) {
                        alert("CEP não encontrado.")
                        return
                    }

                    enderecoInput.value = `${data.logradouro}, ${data.bairro}, ${data.localidade} - ${data.uf}`
                })
                .catch(() => {
                    alert("Erro ao buscar o endereço. Tente novamente.")
                })
        })

    </script>


</body>

</html>