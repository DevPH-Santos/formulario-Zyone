<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="logo.png" type="image/png">
    <link rel="stylesheet" href="style.css">
    <title>Formulário de Cadastro - Zyone Cosméticos</title>
</head>

<body>

    <header>

        <!--<h1 class="brand-name">Zyone Cosméticos</h1>-->
        <img src="bannerZYONE.png" class="banner" alt="">

    </header>

    <main class="form-container">

        <form action="" id="formulario">

            <h2 class="form-title">Cadastro de Cliente</h2>

            <div class="form-group">

                <label>Nome Completo</label>
                <input type="text" name="nomeCompleto" placeholder="Digite seu nome completo" required>

            </div>

            <div class="form-group">

                <label>CPF</label>
                <input type="text" id="cpf" name="cpf" placeholder="Digite seu CPF" required>

            </div>

            <div class="form-group">

                <label>Telefone</label>
                <input type="tel" id="telefone" name="telefone" placeholder="(00) 00000-0000" required>

            </div>

            <div class="form-group">

                <label>E-mail</label>
                <input type="email" name="email" placeholder="seu@email.com" required>

            </div>

            <div class="form-group">

                <label>Data de Nascimento</label>
                <input type="text" name="dataNasc" maxlength="10" id="dataNasc" required>

            </div>


            <div class="form-group">

                <label>CEP</label>
                <input type="text" id="cep" name="cep" maxlength="9" placeholder="Digite o seu CEP" required>

            </div>

            <div class="form-group">

                <label>Bairro</label>
                <input type="text" id="bairro" name="bairro" placeholder="Digite nome do bairro" required>

            </div>

            <div class="form-group">

                <label>Rua</label>
                <input type="text" id="rua" name="rua" placeholder="Digite nome da rua" required>

            </div>

            <div class="form-group">
                
                <label>Número da casa</label>
                <input type="text" id="numeroCasa" name="numeroCasa" placeholder="Casa 145" required>

            </div>

            <div class="form-group">

                <label>Cidade</label>
                <input type="text" id="cidade" name="cidade" placeholder="Digite nome da cidade" required>

            </div>

            <div class="form-group">

                <label for="interesse">Qual seu principal interesse na ZYONE</label>
                <select id="interesse" aria-placeholder="Selecione">

                    <option value="" selected disabled>Selecione</option>
                    <option value="consumir">Consumir produtos</option>
                    <option value="revender">Revender produtos</option>
                    <option value="construir">Construir equipe de vendas</option>
                    <option value="todas">Todas as opções</option>

                </select>
                <input type="hidden" name="interesse" id="interesseTexto">

            </div>

            <button type="submit" class="submit-btn">Finalizar</button>

        </form>

        <div id="enviarDados">
            <div class="success-check">
                <svg viewBox="0 0 24 24">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z" />
                </svg>
            </div>

            <span class="status">Concluído com sucesso</span>

            <h1>Deseja enviar seus dados?</h1>

            <p class="description">Seus dados foram processados com sucesso. Clique no botão abaixo para confirmar o
                envio.</p>

            <button id="btnDados">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M2 6v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2zm17 2l-6.5 3.33L5 8v2l6.5 3.33L19 10V8zm0 6l-6.5-3.33L5 14v2l6.5 3.33L19 16v-2z" />
                </svg>
                Enviar dados
                </a>
        </div>

    </main>

    <footer>
        <p>&copy;2025 Zyone Cosméticos. Todos os direitos reservados.</p>
    </footer>

    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <script>

        document.addEventListener("DOMContentLoaded", () => {

            /* =====================
               ELEMENTOS
            ====================== */
            const formulario = document.getElementById('formulario')
            const enviarDados = document.getElementById('enviarDados')
            const btnDados = document.getElementById('btnDados')

            const telefone = document.getElementById('telefone')
            const cpf = document.getElementById('cpf')
            const dataNasc = document.getElementById('dataNasc')
            const cepInput = document.getElementById('cep')
            const selectInteresse = document.getElementById('interesse')
            const interesseTexto = document.getElementById('interesseTexto')

            emailjs.init("iArOc2TEu0F9kovWp")

            formulario.addEventListener('submit', (e) => {
                e.preventDefault()

                const textoInteresse =
                    selectInteresse.options[selectInteresse.selectedIndex].text

                interesseTexto.value = textoInteresse

                formulario.style.display = 'none'
                enviarDados.style.display = 'flex'
            })

            btnDados.addEventListener('click', () => {
                emailjs.sendForm(
                    'service_3lmbyw8',
                    'template_9a2cw1b',
                    formulario
                )
                    .then(() => {
                        alert('Cadastro enviado com sucesso!')
                        limparFormulario()
                    })
                    .catch(() => alert('Erro ao enviar.'))
            })

            // TELEFONE
            telefone.addEventListener('input', () => {
                let v = telefone.value.replace(/\D/g, '').substring(0, 11)

                if (v.length > 6) {
                    v = v.replace(/^(\d{2})(\d{5})(\d+)/, '($1) $2-$3')
                } else if (v.length > 2) {
                    v = v.replace(/^(\d{2})(\d+)/, '($1) $2')
                } else if (v.length > 0) {
                    v = '(' + v
                }

                telefone.value = v
            })

            // CPF
            cpf.addEventListener('input', () => {
                let v = cpf.value.replace(/\D/g, '').substring(0, 11)

                if (v.length > 9) v = v.replace(/^(\d{9})(\d+)/, '$1-$2')
                if (v.length > 6) v = v.replace(/^(\d{6})(\d+)/, '$1.$2')
                if (v.length > 3) v = v.replace(/^(\d{3})(\d+)/, '$1.$2')

                cpf.value = v
            })

            // DATA NASCIMENTO
            dataNasc.addEventListener('input', () => {
                let v = dataNasc.value.replace(/\D/g, '').substring(0, 8)

                if (v.length > 4) v = v.replace(/^(\d{2})(\d{2})(\d+)/, '$1/$2/$3')
                else if (v.length > 2) v = v.replace(/^(\d{2})(\d+)/, '$1/$2')

                dataNasc.value = v
            })

            // CEP
            cepInput.addEventListener('input', () => {
                let v = cepInput.value.replace(/\D/g, '').substring(0, 8)
                if (v.length > 5) v = v.replace(/^(\d{5})(\d+)/, '$1-$2')
                cepInput.value = v
            })

            cepInput.addEventListener('blur', () => {
                const cep = cepInput.value.replace(/\D/g, '')
                if (cep.length !== 8) return alert('CEP inválido')

                fetch(`https://viacep.com.br/ws/${cep}/json/`)
                    .then(res => res.json())
                    .then(data => {
                        if (data.erro) return alert('CEP não encontrado')

                        document.getElementById('bairro').value = data.bairro
                        document.getElementById('rua').value = data.logradouro
                        document.getElementById('cidade').value =
                            `${data.localidade} - ${data.uf}`
                    })
                    .catch(() => alert('Erro ao buscar CEP'))
            })

            function limparFormulario() {
                formulario.reset()
                enviarDados.style.display = 'none'
                formulario.style.display = 'block'
            }

        })

    </script>

</body>

</html>